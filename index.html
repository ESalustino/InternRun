<html>
    <head>
        <title>Intern Run!</title>
        <script src="http://cloud.github.com/downloads/processing-js/processing-js/processing-1.4.1.min.js"></script>
        <script type="text/processing" data-processing-target="mycanvas">



        var enemies=["data/enemies.png"];
        var newsSprite = ["data/newspaper.png"];
        var enemy; 
        var playerSprites= ["sprites/sprite_2.png","sprites/sprite_3.png"];
       
        var pages= ["pages/Intro.png","pages/GameOver.png","pages/YouWin.png"];
        var health = 5;
        //var scoreCount = true;
        var score = 0; 
        var x = 0;
        var y = 475;


// Intro Menu button variables
        var button;
        var clicked= false;

        //building variables
        var build;
        var build1;
        var build2;
        var build3;
        var build4;
        var build5;
        var build6;
        var build7;
        var build8;

        var buildM1;
        var buildM2;
        var buildM3;
        var buildM4;
        var buildM5;
        var buildM6;
        var buildM7;
        var buildM8;

        var buildB1;
        var buildB2;
        var buildB3;
        var buildB4;
        var buildB5;
        var buildB6;
        var buildB7;
        var buildB8;

        var sidewalk;
        var street1;
        var streetpaint1;
        var streetpaint2;
        var streetpaint3;
        var streetpaint4;

        var Moon;

        var scroll;

        PImage GameOver;
        PImage Intro;
        PImage YouWin;

        var continueScore = true; 




        void setup()
        {

            sidewalk= new building(0,550,800,100,[19,3,21],0);
            street1= new building(0,700,20,50,[20,20,20],1);
            streetpaint1=new building(750,575,20,10,[250,231,93],3);
            streetpaint2=new building(500,575,20,10,[250,231,93],3);
            streetpaint3= new building(250,575,20,10,[250,231,93],3);
            streetpaint4= new building(0,575,20,10,[250,231,93],3);

        	//foreground
        	
        	//middleground
        	buildM1 = new building(100,random(400,300),random(300,100),random(900,800),[105,105,105],1);
        	buildM2 = new building(200,random(400,300),random(300,100),random(900,800),[105,105,105],1);
        	buildM3 = new building(300,random(400,300),random(300,100),random(900,800),[105,105,105],1);
        	buildM4 = new building(400,random(400,300),random(300,100),random(900,800),[105,105,105],1);
        	buildM5 = new building(500,random(400,300),random(300,100),random(900,800),[105,105,105],1);
        	buildM6 = new building(600,random(400,300),random(300,100),random(900,800),[105,105,105],1);
        	buildM7 = new building(700,random(400,300),random(300,100),random(900,800),[105,105,105],1);
        	buildM8 = new building(800,random(400,300),random(300,100),random(900,800),[105,105,105],1);
        	//background
        	buildB1 = new building(100,random(300,100),random(300,50),random(900,800),[119,136,153],0.5);
        	buildB2 = new building(200,random(300,100),random(300,50),random(900,800),[119,136,153],0.5);
        	buildB3 = new building(300,random(300,100),random(300,50),random(900,800),[119,136,153],0.5);
        	buildB4 = new building(400,random(300,100),random(300,50),random(900,800),[119,136,153],0.5);
        	buildB5 = new building(500,random(300,100),random(300,50),random(900,800),[119,136,153],0.5);
        	buildB6 = new building(600,random(300,100),random(300,50),random(900,800),[119,136,153],0.5);
        	buildB7 = new building(700,random(300,100),random(300,50),random(900,800),[119,136,153],0.5);
        	buildB8 = new building(800,random(300,100),random(300,50),random(900,800),[119,136,153],0.5);

        	Moon = new moon(0,60,50,0.25);

            player1 = new Player(0,455,20);

            scroll = new Scroller(800,2);

            enemy= new Enemy(400,530,10); // new enemy
            enemy2=new Enemy(800,530,10);
            enemy3=new Enemy(1200,530,10);
            enemy4=new Enemy(1600,530,10);
            enemy5=new Enemy(2100,530,10);
            enemy6=new Enemy(2500,530,10);
            enemy7=new Enemy(2900,530,10);
            enemy8=new Enemy(3300,530,10);
            enemy9=new Enemy(3700,530,10);
            enemy10=new Enemy(4100,530,10);
            enemy11=new Enemy(4500,530,10);
            enemy12=new Enemy(4900,530,10);
            enemy13=new Enemy(5300,530,10);
            enemy14=new Enemy(5700,530,10);
            enemy15=new Enemy(6100,530,10);



            button=new Button(400,100,200,250);

           

        	size(800,600);
        	background(173,216,230);

            GameOver =loadImage(pages[1]);
            Intro= loadImage(pages[0]);
            YouWin=loadImage(pages[2]);
            
        }

        void draw()
        {
            var st
            image(Intro,0,0);
            button.drawRectangle();

            if(mousePressed)
            {
                if(button.pressed()== true)
                {
                    clicked=true;
                }
            }
            if(clicked==true)
            {

                background(173,216,230);

            	Moon.drawMoon();
            	
                sidewalk.drawBuilding();
                street1.drawBuilding();
                streetpaint1.drawBuilding();
                streetpaint2.drawBuilding();
                streetpaint3.drawBuilding();
                streetpaint4.drawBuilding();

            	//background
            	buildB1.drawBuilding();
            	buildB2.drawBuilding();
            	buildB3.drawBuilding();
            	buildB4.drawBuilding();
            	buildB5.drawBuilding();
            	buildB6.drawBuilding();
            	buildB7.drawBuilding();
            	buildB8.drawBuilding();

            	//mid ground
            	buildM1.drawBuilding();
            	buildM2.drawBuilding();
            	buildM3.drawBuilding();
            	buildM4.drawBuilding();
            	buildM5.drawBuilding();
            	buildM6.drawBuilding();
            	buildM7.drawBuilding();
            	buildM8.drawBuilding();
            	//foreground

            
            	//mid ground
            	buildM1.moveBuilding();
            	buildM2.moveBuilding();
            	buildM3.moveBuilding();
            	buildM4.moveBuilding();
            	buildM5.moveBuilding();
            	buildM6.moveBuilding();
            	buildM7.moveBuilding();
            	buildM8.moveBuilding();
            	//background
            	buildB1.moveBuilding();
            	buildB2.moveBuilding();
            	buildB3.moveBuilding();
            	buildB4.moveBuilding();
            	buildB5.moveBuilding();
            	buildB6.moveBuilding();
            	buildB7.moveBuilding();
            	buildB8.moveBuilding();

                sidewalk.moveBuilding();
                street1.moveBuilding();
                streetpaint1.moveBuilding();
                streetpaint2.moveBuilding();
                streetpaint3.moveBuilding();
                streetpaint4.moveBuilding();

            	Moon.moveMoon();

                sidewalk.drawBuilding();
                street1.drawBuilding();
                streetpaint1.drawBuilding();
                streetpaint2.drawBuilding();
                streetpaint3.drawBuilding();
                streetpaint4.drawBuilding();


                sidewalk.moveBuilding();
                street1.moveBuilding();
                streetpaint1.moveBuilding();
                streetpaint2.moveBuilding();
                streetpaint3.moveBuilding();
                streetpaint4.moveBuilding();

                // enemies.drawEnemies;
                // enemies.moveEnemies;

                player1.drawSprites();


                scroll.drawNewspapers(); 
                scroll.checkCollissions(); 
                scroll.moveNewspapers();

                
                // Drawing enemies
                enemy.drawEnemies(); 
                enemy2.drawEnemies();
                enemy3.drawEnemies();
                enemy4.drawEnemies();
                enemy5.drawEnemies();
                enemy6.drawEnemies();
                enemy7.drawEnemies();
                enemy8.drawEnemies();
                enemy9.drawEnemies();
                enemy10.drawEnemies();
                enemy11.drawEnemies();
                enemy12.drawEnemies();
                enemy13.drawEnemies();
                enemy14.drawEnemies();
                enemy15.drawEnemies();
                
                //making them move
                enemy.moveEnemies();
                enemy2.moveEnemies();
                enemy2.moveEnemies();
                enemy3.moveEnemies();
                enemy4.moveEnemies();
                enemy5.moveEnemies();
                enemy6.moveEnemies();
                enemy7.moveEnemies();
                enemy8.moveEnemies();
                enemy9.moveEnemies();
                enemy10.moveEnemies();
                enemy11.moveEnemies();
                enemy12.moveEnemies();
                enemy13.moveEnemies();
                enemy14.moveEnemies();
                enemy15.moveEnemies();
                

                player1.collisions(enemy);
                player1.collisions(enemy2);
                player1.collisions(enemy3); 
                player1.collisions(enemy4);
                player1.collisions(enemy5);
                player1.collisions(enemy6);
                player1.collisions(enemy7);
                player1.collisions(enemy8);
                player1.collisions(enemy9);
                player1.collisions(enemy10);
                player1.collisions(enemy11);
                player1.collisions(enemy12);
                player1.collisions(enemy13);
                player1.collisions(enemy14);
                player1.collisions(enemy15);
               

                // function to check player and character collisions, check line 445.
                
                var string="Health: "+ health;
                var string2 = "Score: " + score;

                fill(0,0,0);
                textSize(30);
                text(string,650,50);

                text(string2,650,100);

                if (health <= 0)
                {
                    image(GameOver,0,0);
                }

                if( score >= 10)
                {
                    image(YouWin,0,0);
                }

                /*
                if (score >=100)
                {
                    image(YouWin,0,0);
                    scoreCount:false;
                    fill(163,19,240);
                rect(650,50,150,30);
                }*/


            }


        }

        class Button
        {
            var w;
            var h;
            var x;
            var y;
            boolean pressed=false;

            Button(width,height,x,y)
            {
                w=width;
                h=height;
                this.x=x;
                this.y=y;
            }
            void drawRectangle()
            {
                noFill();

                rect(x,y,w,h);
            }

            void pressed()
            {
                if(mouseX>=x && mouseX <= x+w && mouseY >= y  && mouseY <=y+h)
                {
                    return true;
                }
                return false;
            }

        }

        class building
        {
        	var xPos;
        	var yPos;
        	var width;
        	var height;
        	var r;
        	var g;
        	var b;
        	var xSpeed;

        	building(x,y,w,h,color,speedX)
        	{
        		xPos = x;
        		yPos = y;
        		width = w;
        		height = h;
        		r = color[0];
        		g = color[1];
        		b = color[2];
        		xSpeed = speedX
        	}

        	void drawBuilding()
        	{
	        		noStroke();
	        		fill(r,g,b);
	    			rect(xPos,yPos,width,height);
        	}

        	void moveBuilding()
        	{
        		xPos -= xSpeed;

        		if (xPos < -200 )
        		{
        			xPos = 800;
        		}
        	}

        
        }


        class moon
        {
        	var x;
        	var y;
        	var size;
        	var xSpeed;

        	moon(xPos,yPos,s,speedx)
        	{
        		x = xPos;
        		y = yPos;
        		size = s;
        		xSpeed = speedx;
        	}

        	void drawMoon()
        	{
        		noStroke();
        		fill(238,232,170);
        		ellipse(x,y,size,size);
        	}

        	void moveMoon()
        	{
        		x -= xSpeed;

        		if (x < -50)
        		{
        			x = +800;
        		}
        	}
        }

        void keyPressed() 
        {
            if (key == CODED) 
            {

                if (keyCode == RIGHT) 
                {

                    //player1.move(); 
                    // image(sprite,x,y+3);

                    // image(sprite2,x,y);


                    // image(sprite3,x,y+3);
                    // image(sprite4,x,y+3);

                    // console.log("RightPressed");
                    // x += 20;

                    // if(x >= 650)
                    // {
                    //  x = 0; 
                    // }

                        // for(var i = 0; i<4;i++)
                        // {
                        //  image(sprite[i],x,y);
                        //  console.log("RightPressed");
                        // }
                        

                    
                }

                if(keyCode == UP)
                {
                    
                    
                    // x = x + 15; 
                    // y = y - 90;

                    // if(y <=280)
                    // {
                    //  y = 400;
                    // }

                    // if(x >= 650)
                    // {
                    //  x = 0;
                    // }

                    player1.jump();
                    
                    
                }

                if (keyCode==LEFT)
                {
                    goLeft();               
                }
            }





            
        }

        void keyReleased()
        {
            player1.getDown();  

        }

        class Player
        {
            var x;
            var y;
            var speed; 
            var w;
            var h; 

            PImage first = loadImage(playerSprites[0]);
            PImage second = loadImage(playerSprites[1]);

            Player(xPosition,yPosition,speed1)
            {
                x = xPosition; 
                y = yPosition;
                speed = speed1; 
                w = 130;
                h = 130;
            }

            void drawSprites()
            {
                image(first,x,y,w,h); 
            }

            void move()
            {
                //image(first,x,y,w,h);
                image(second,x-20,455,w,h); 

                x+=speed; 
                if(x >=680)
                {
                    x  = 0;  
                }

                 // line of code that checks collisions with enemies
            }

            void jump()
            {
                x += speed + 140; 
                y = y - 150; 

                if(y<=200)
                {
                    y = 400;
                }
                if(x>= 650)
                {
                    x = 0; 
                }
            }
            void getDown()
            {
                y = 455; 
            }

            void getY()
            {
                return y; 
            }

            void goLeft()
            {
                x+=speed-30;
            }

            void collisions(Object other)
            {
                if(x>= other.x-30 && x <= other.x+ other.w && y <= other.y && y>=other.y - other.h)
                    {
                        console.log("Game Over");
                        other.deleteEnemies(); 
                        health-=1;
                    }

           
            }

            void checkCollissions(Object other)
            {
                if(x>= other.x - 30 && x<= other.x + other.w + 20 && y<= other.y && y>= other.y - other.h - 20 )
                {   

                    other.eraseNews(); 
                    console.log("NEWS");
                    if(continueScore == true)
                    {
                        score +=1; 
                    }
                    
                    //console.log("");
                    //console.log(x , "    ", other.x , "       ", other.x + other.w);
                    //console.log(y, "  ", other.y , "  ", other.y - other.h); 
                }
            }


     
            



        }

        class News
        {
            var x;
            var y;
            var h;
            var w;
            var xPos = x; 
            
         
            

            
            PImage newspaper = loadImage(newsSprite);

            News(x1,y1,w1,h1)
            {
                x = x1;
                y = y1;
                h = h1;
                w = w1;
            }

            void drawNews()
            {
                image(newspaper,x,y,w,h); 
            }
            void moveNews(speed)
            {
                //var moveDistance = Math.floor(Math.random() * (2-1) + 1); 
                //x-=moveDistance;

                x-=speed; 

            }
            void eraseNews()
            {
                x = Math.random()*(10000 - 8000) + 8000 ;
                
                //console.log("Deleted!!"); 
                //deleted = true; 
            }
        

        }

        class Enemy  // enemy class
        {
            var x;
            var y;
            var speed;
            var w;
            var h;
            
            PImage enemy1= loadImage(enemies);

            Enemy(xPosition,yPosition,speed2)
            {
                    x=xPosition;
                    y=yPosition;
                    speed=speed2;
                    w=70;
                    h=130;
            }

            void drawEnemies()
            {
                image(enemy1,x,y,w,h);
            }

            void moveEnemies()
            {
            
                x-=1;;



                
            }

            void deleteEnemies()
            {

                x = 10000;
                
            }

            

        }   

        class Scroller
        {
            var layerWidth;
            //var layerHeight; 
            //var basePosition; 
            var speed;
            //var r;
            //var g;
            //var b;
            //var scrollEndX = 0;
            var scrollEndX2 = 0; 
           // var scrollEndX3 = 0;
            var news= new Array();
            //var buildings = new Array();
           // var enemyList = new Array(); 


            
            Scroller(width,scrollSpeed)
            {
                layerWidth = width;
                //layerHeight = height;
                //basePosition = base;
                speed = scrollSpeed;
                
                

                currentWidth2 = 500;
                while(currentWidth2 <= layerWidth)
                {
                    //var newsX = currentWidth2 + Math.random()*(200-100) + 100; 
                    var newsX = currentWidth2 + 50; 
                    var newsY = 350;
                    news.push(new News(newsX, newsY , 50, 50)); 

                    currentWidth2 += newsX + 50;
                }

                scrollEndX2 = currentWidth2 ; 

                



            }
            
            //putting classes in an array 
            //In this case the instances of Building class are put into an array called Buildings 
            
          
            
            void drawNewspapers()
            {
                for(var i = 0; i < news.length; i++)
                {
                    news[i].drawNews();
                }
            }

          

         

            void moveNewspapers()
            {
                for(var i = 0; i < news.length; i++)
                {
                    news[i].moveNews(speed); 
                }

                scrollEndX2 -= speed;
                if(scrollEndX2 <= 800)
                {
                    addNewsPaper(scrollEndX2);
                }
            }

            

            void checkCollissions()
            {
                for(var i = 0; i < news.length; i++)
                {
                    player1.checkCollissions(news[i]);
                    
                }


            }

            
            

            void addNewsPaper(xLocation)
            {
                //var newsX = currentWidth2 + Math.random()*(200-100) + 100; 
                //newsX = 50;
                //var currentWidth2 = xLocation;

                //newsX = currentWidth2; 
                var newsY = 350;
                news.push(new News(xLocation,newsY,50,50)); 

                
                //currentWidth2 += newsX + 50;

                scrollEndX2 += Math.random()*(250) + 150;

                //console.log("addNewsPaper");
            }

        }
    

       





</script>
    </head>
    <body>
        <canvas id="mycanvas"></canvas>
    </body>
</html>
